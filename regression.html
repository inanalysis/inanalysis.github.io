---
layout: default
---

<!-- Page Header -->
<header class="masthead" style="background-image: url('img/regression_header.jpg')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-md-10 mx-auto">
                <div class="post-heading">
                    <h1>Regression</h1>
                    <h2 class="subheading">迴歸（Regression）是找一個函數，盡量符合訓練資料數據，通過迴歸模型由給出的自變量預測因變量的值。</h2>
                    <span class="meta">Posted by
                <a href="#">InAnalysis</a>
                on August 23, 2017</span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-8 col-md-10 mx-auto">
                <h2 class="section-heading">Introduction</h2>
                <hr>
                <p>
                    迴歸分析是根據已知樣本的某些特徵，推論一個樣本的答案。迴歸分析問題是監督式學習的一種，
                    根據已知訓練區提供的樣本，通過計算選擇特徵參數，建立判別函數以對樣本進行推論。
                </p>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-8 col-md-10 mx-auto">
                <h2 class="section-heading">Example</h2>
                <hr>
                <h5>欲解決的問題</h5>
                <p>由連續三小時的大氣數據(O3、PM10、PM2.5、風速)來預測第四小時的PM2.5數值。</p>
                <img class="img-fluid" src="img/demo/regression/pm2.5.png" alt="">
                <span class="caption text-muted">PM2.5</span>
                <h5>資料欄位說明</h5>
                <p>
                    1.O3(前一小時臭氧值)<br>
                    2.PM10(前一小時PM10值)<br>
                    3.PM25-3(前三小時PM2.5值)<br>
                    4.PM25-2(前二小時PM2.5值)<br>
                    5.PM25(前一小時PM2.5值)<br>
                    6.WS_HR(前一小時風速值)<br>
                    7.ANS(實際檢測到的PM2.5數值)
                </p>
                <h5>資料來源</h5>
                <p>環保署:
                    <a href="https://taqm.epa.gov.tw/taqm/tw/YearlyDataDownload.aspx">空氣品質測站＼歷年監測資料下載</a>
                </p>
                <h5>建立訓練資料</h5>
                <p>
                    下載pm2.5Train.csv作為訓練檔（
                    <a href="file/pm2.5Train.csv">下載</a> 1.8 kB ）
                </p>
                <h5>建立測試資料</h5>
                <p>
                    下載pm2.5Test.csv作為訓練檔（
                    <a href="file/pm2.5Test.csv">下載</a> 1.8 kB ）
                </p>
                <h5>模型建立方法</h5>
                <p>用linear regression演算法建立預測模型</p>
                <h5>模型結果預覽</h5>
                <img class="img-fluid" src="img/demo/regression/model_preview.png" alt="">
            </div>
        </div>
        <div class="row">
            <div class="col-lg-8 col-md-10 mx-auto">
                <h2 class="section-heading">Step by Step</h2>
                <hr>
                <p>跟著以下流程操作示範，即可輕鬆建立PM2.5預測模型</p>
                <h4>
                    1.建立專案 Create Project
                </h4>
                <p>建立Regression Project以進行KDD流程訓練模型，並可將模型Export成API</p>
                <img class="img-fluid" src="img/demo/intro/01_index.png" alt="">
                <blockquote><p><small>
                    InAnalysis User Dashboard <br>
                    1. 回到InAnalysis User Dashboard<br>
                    2. 進入Project Management, 可新增、修改、刪除Project<br>
                    3. 進入API Management, 可新增、修改、刪除API<br>
                    4. Documentation, 教學網站連結與範例資料檔案<br>
                    5. Machine Learning Server Situation, 顯示Server是否正常啟動<br>
                    6. Number of Projects, 顯示使用者建立的Project數量<br>
                    7. 進入Project Management, 可新增、修改、刪除Project<br>
                    8. Number of API, 顯示使用者建立的API數量<br>
                    9. 進入API Management, 可新增、修改、刪除API<br>
                </small></p></blockquote>
                <p>我們在這個頁面點選2.或是7.進入Project Management, 開始機器學習的流程</p>
                <img class="img-fluid" src="img/demo/regression/1_project.png" alt="">
                <blockquote><p><small>
                    Project Management <br>
                    1. 選擇Project Type, 四種Project Type有不同的任務<br>
                    2. 輸入Project的名稱<br>
                    3. 新增Project<br>
                </small></p></blockquote>
                <p>建立Regression專案</p>
                <img class="img-fluid" src="img/demo/regression/1_KDD.png" alt="">
                <p>新增project成功後，下方的My Projects即會出現剛剛所新建的專案，點選 [KDD] 以開始機器學習流程。</p>

                <h4>
                    2.檔案上傳 Data Input
                </h4>
                <p>上傳csv資料檔案以進行KDD流程</p>
                <img class="img-fluid" src="img/demo/regression/2_KDD_upload.png" alt="">
                <blockquote><p><small>
                    KDD：Data Input<br>
                    1. 點選可看到KDD各個流程的詳細說明<br>
                    2. 提示欄，建議使用者下一個步驟可以做什麼<br>
                    3. Model Management，這個Project訓練出來的所有模型可在這邊瀏覽，修改資訊或Export成API<br>
                    4. 選擇資料上傳的階段<br>
                    5. 從本機端選擇資料<br>
                    6. 點選進行資料上傳<br>
                </small></p></blockquote>
                <img class="img-fluid" src="img/demo/regression/2_upload-label.png" alt="">
                <blockquote><p><small>
                    KDD：Data Input - select label column<br>
                    1. 選擇作為標記的資料（Regression可以作為標記的資料類型為：整數、浮點數），在這個範例，選取 "ANS" 作為標記<br>
                    2. 儲存檔案<br>
                </small></p></blockquote>
                <p>上傳完成會看到該資料的操作欄位</p>
                <img class="img-fluid" src="img/demo/regression/2_files.png" alt="">
                <blockquote><p><small>
                    Data Information<br>
                    1. 顯示上傳資料的檔案名稱<br>
                    2. 點選可看到該資料的操作紀錄說明<br>
                    3. 顯示該資料所在的Server<br>
                    4. 顯示資料欄位數量<br>
                    5. 顯示該資料被設為標籤的欄位名稱，若該資料無標籤則顯示「No Label」<br>
                    6. 點選按鈕可對該資料進行各項操作處理，綠色為系統建議的下一步操作<br>
                    7. 點選預覽整份資料<br>
                    8. 點選可下載資料<br>
                    9. 點選會將該資料刪除<br>
                </small></p></blockquote>
                <p>我們點選7.Preview來預覽整份資料</p>
                <img class="img-fluid" src="img/demo/regression/2_data-viewer.png" alt="">
                <blockquote><p><small>
                    Data Viewer<br>
                    1. 正在預覽的資料檔案名稱，與檔案所在的Server<br>
                    2. 顯示該資料的所有欄位名稱<br>
                    3. 顯示該欄位的第一項資料<br>
                    4. 顯示該欄位的資料型態<br>
                    5. 顯示該欄位的資料平均值，若為非數值型態則會顯示「-」<br>
                    6. 顯示該欄位的資料標準差，若為非數值型態則會顯示「-」<br>
                    7. 點選可看到該欄位的所有資料分佈直方圖<br>
                    8. 點選回到KDD流程<br>
                </small></p></blockquote>

                <h4>
                    3.資料前處理 Data Pre-process
                </h4>
                <p>這個步驟可對資料進行缺值過濾、常態分佈離群值過濾、正規化等預處理</p>
                <p>從Function欄位中, 選擇 [Data Pre-processing] 按鈕, 開始進行資料預處理(Pre-process)</p>
                <img class="img-fluid" src="img/demo/regression/3_preprocess-1.png" alt="">
                <blockquote><p><small>
                    Step 1<br>
                    1. 正在處理的資料檔案名稱，與檔案所在的Server<br>
                    2. 選擇欄位<br>
                    3. 取消回到KDD流程頁面/預覽該欄位的資料分佈直方圖<br>
                </small></p></blockquote>
                <img class="img-fluid" src="img/demo/regression/3_preprocess-2.png" alt="">
                <blockquote><p><small>
                    Step 2<br>
                    1. 對資料進行缺值過濾，如果該列資料有NAN則會刪除該列資料，這個步驟能夠確保訓練時不會因為資料不齊全而出現錯誤<br>
                    2. 對該欄位資料進行利用常態分佈離群值過濾，1 std表示將過慮掉1個標準差以外的離群資料，0 std表示不對資料做離群值過濾<br>
                    3. 取消處理動作回到Step 1選擇欄位<br>
                    4. 執行上述處理並預覽該欄位處理過後的資料分佈直方圖<br>
                </small></p></blockquote>
                <img class="img-fluid" src="img/demo/regression/3_preprocess-3.png" alt="">
                <blockquote><p><small>
                    Step 3<br>
                    1. 選擇Normalize的演算法<br>
                    2. 選擇欲進行Normalize的資料欄位，進行Normalize能夠將資料Scale到相同的range<br>
                </small></p></blockquote>
                <img class="img-fluid" src="img/demo/regression/3_preprocess-4.png" alt="">
                <blockquote><p><small>
                    Step 4<br>
                    1. 輸入處理過資料的新檔案名稱<br>
                    2. 取消處理動作，不儲存處理過的新資料，並回到KDD流程頁面<br>
                    3. 儲存處理過的新資料，並回到KDD流程頁面
                </small></p></blockquote>

                <p>這個範例將資料進行缺值過濾、常態分佈離群值過濾處理（
                    <a href="file/pm2.5_preprocess.csv">下載</a> 檔案觀察資料變化，151.2 kB）。<br>
                    完成前處理後的資料會顯示在Feature Selection Stage欄位之中<br>
                    按下 [Feature-Selection] 進入特徵選擇頁面
                </p>
                <img class="img-fluid" src="img/demo/regression/4_KDD_feature.png" alt="">

                <h4>
                    4.特徵選擇 Feature Selection
                </h4>
                <p>這個步驟是利用Pearson Correlation演算法計算各個Feature間的關係程度,以作為選擇Feature的參考，按下 [Apply Algorithm]</p>
                <img class="img-fluid" src="img/demo/regression/4_apply.png" alt="">
                <img class="img-fluid" src="img/demo/regression/4_feature_matrix.png" alt="">
                <blockquote><p><small>
                    Feature Selection<br>
                    1. 勾選要保留的feature<br>
                    2. Feature名稱<br>
                    3. 此Feature的Mean值<br>
                    4.Feature標準差<br>
                    5.各個Feature間的關係係數及該欄平均關係係數，顏色越紅correlation越高<br>
                </small></p></blockquote>
                <p>在這個範例我們選擇全部的feature。選擇完要使用的feature後，輸入新的檔名，並儲存或放棄此步驟。</p>
                <img class="img-fluid" src="img/demo/regression/4_feature_save.png" alt="">

                <h4>
                    5.模型訓練 Model Training
                </h4>
                <p>
                    這個步驟能夠選擇演算法對資料進行模型訓練，並預覽訓練出來的模型<br>
                    從功能欄點選Model Training，開始進行模型訓練
                </p>
                <img class="img-fluid" src="img/demo/regression/5_model-training.png" alt="">
                <blockquote><p><small>
                    Model Training<br>
                    1. 選擇模型訓練的演算法<br>
                    2. 設定演算法參數，或直接使用預設值<br>
                    2-1. Fit Intercept: 是否加上Ｙ軸截距<br>
                    2-2. Normolize: 若 Fit Intercept = False，此欄位無效。若此欄為true，X會先以mean及I2-norm 做normolize<br>
                    2-3. Copy X: 是否備份X。若False則覆寫<br>
                    2-4. N Jobs: 要創的計算工作數量<br>
                    3. 輸入模型名稱<br>
                    4. 進行模型訓練<br>
                    5. 回到KDD流程<br>
                </small></p></blockquote>
                <img class="img-fluid" src="img/demo/regression/model_preview.png" alt="">
                <blockquote><p><small>
                    Model Preview<br>
                    1. 選擇兩個資料欄位<br>
                    2. 顯示訓練好的模型圖<br>
                </small></p></blockquote>
                <p>兩個檔案都分別進行模型訓練訓，練出來的兩個模型可以在Model Management頁面看到</p>
                <img class="img-fluid" src="img/demo/regression/5_model_management.png" alt="">
                <img class="img-fluid" src="img/demo/regression/5_model.png" alt="">
                <blockquote><p><small>
                    Model Management<br>
                    1. 模型名稱<br>
                    2. 模型訓練使用的演算法<br>
                    3. 訓練使用的檔案及參數<br>
                    4. 將模型匯出成API<br>
                    5. 修改模型資料<br>
                    6. 刪除模型<br>
                </small></p></blockquote>

                <h4>
                    6.模型預測 Model Prediction
                </h4>
                <p>
                    這個步驟能夠利用已經訓練好的模型對新的資料進行預測，並顯示預測分類的結果及準確度
                </p>
                <img class="img-fluid" src="img/demo/regression/6_upload.png" alt="">
                <img class="img-fluid" src="img/demo/regression/6_upload-label.png" alt="">
                <p>
                    上傳要預測的檔案到[Model Prediction]這個Stage
                </p>
                <img class="img-fluid" src="img/demo/regression/6_KDD.png" alt="">
                <p>
                    從功能欄中點選 [Model Prediction]
                </p>
                <img class="img-fluid" src="img/demo/regression/6_predict-1.png" alt="">
                <img class="img-fluid" src="img/demo/regression/6_predict-2.png" alt="">
                <p>
                    選擇剛剛訓練好的Model，按下[Predict]，系統即會顯示RMSE(Root Mean Square Error)<br>
                    「方均根偏移(root-mean-square deviation)或方均根差(root-mean-square error)
                    是一種常用的測量數值之間差異的量度(measure)，其數值常為模型預測的量或是被觀察到的估計量(estimator)。
                    方均根偏移代表預測的值和觀察到的值之差的樣本標準差(sample standard deviation)」
                    _(來源：<a href="https://zh.wikipedia.org/wiki/%E6%96%B9%E5%9D%87%E6%A0%B9%E5%B7%AE">維基百科</a>)
                </p>

                <h4>
                    7.建立API Export API
                </h4>
                <p>這個步驟能夠將訓練好的模型建立成API，以利更多的應用</p>
                <img class="img-fluid" src="img/demo/regression/7_export.png" alt="">
                <span class="caption text-muted">選擇Export API的功能</span>
                <img class="img-fluid" src="img/demo/regression/7_set_api.png" alt="">
                <blockquote><p><small>
                    Set API Input<br>
                    1. 輸入API的名稱，以及API功能描述<br>
                    2. 輸入自訂的API Input Key<br>
                    3. 輸入API Input描述<br>
                </small></p></blockquote>
                <img class="img-fluid" src="img/demo/regression/7_set_api_out.png" alt="">
                <blockquote><p><small>
                    Set API Output<br>
                    1. 輸入自訂的API Output Key<br>
                    2. 輸入API Output描述
                </small></p></blockquote>
                <p>建立API後，會顯示API呼叫URL以及API輸入輸出的json格式</p>
                <img class="img-fluid" src="img/demo/regression/7_show_api.png" alt="">
                <blockquote><p><small>
                    Show API Format<br>
                    1. API的名稱<br>
                    2. API的呼叫路徑<br>
                    3. API Input格式<br>
                    4. API Output格式<br>
                </small></p></blockquote>
                <p>點選上方功能列的API ，可以檢視全部建立好的API</p>
                <img class="img-fluid" src="img/demo/regression/7_api_management.png" alt="">
                <blockquote><p><small>
                    Model Training<br>
                    1. 輸入API的名稱<br>
                    2. API功能描述<br>
                    3. API建立資訊<br>
                    4. 編輯API<br>
                    5. 刪除API<br>
                </small></p></blockquote>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-8 col-md-10 mx-auto">
                <h2 class="section-heading">Machine Learning Canvas機器學習畫布</h2>
                <hr>
                <p>Machine Learning Canvas(機器學習畫布)的框架分為4個部分：問題定義、模型預測、模型學習和系統評估，
                    這個畫布能夠幫助機器學習團隊釐清開發應用時所會面臨的問題</p>
                <iframe width="560" height="315" align="middle" src="https://www.youtube.com/embed/Qpo5XzlUrwE?rel=0"
                        frameborder="0" allowfullscreen></iframe>
                <img class="img-fluid" src="img/demo/regression/canvas.jpg" alt="">
                <p>
                    Machine Learning Canvas_空白畫布可由此<a href="https://goo.gl/Hek2N9">下載</a>
                </p>
                <hr>
                <button type="button" class="btn btn-primary btn-lg btn-block"
                        onclick="window.open('http://ntuesoe.com:8008','_blank')">
                    立即試用！
                </button>
            </div>
        </div>
    </div>
</article>
